var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee";this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite",["Audio/Audiosprite.ogg","Audio/Audiosprite.m4a"],"Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee";this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,
this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee";this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee";this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),
this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),
localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),
this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};var CubeGame=function(){};CubeGame.config={FONT:"Lato",SCROLL_VELOCITY:-450,GRAVITY:800,JUMP_VELOCITY:-300,AtlasSettings:{NAME:"Textures",JSON:"Textures.json",IMG:"Textures.png"},GAME:null},CubeGame.Play=function(){},CubeGame.Play.prototype={create:function(){this.initGame(),this.initPlayer(),this.initObstacles(),this.initEventListeners(),this.initGUI(),this.initConfig()},initGame:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=CubeGame.config.GRAVITY,CubeGame.AudioManager.playAudio("Ping"),this.game.stage.backgroundColor="#eeeeee"},initPlayer:function(){this.player=new CubeGame.Player(this.game),this.game.add.existing(this.player)},initObstacles:function(){this.obstacles=new CubeGame.Obstacles(this.game),this.game.add.existing(this.obstacles)},initGUI:function(){CubeGame.ScoreManager.resetScore(),this.scoreText=CubeGame.factory.addText(40,20,"Score: 0",40,"#5f5f5f"),this.scoreTextSlideIn=this.game.add.tween(this.scoreText).from({x:-300},300,Phaser.Easing.Sinusoidal.Out).start()},initConfig:function(){CubeGame.config.spawnIntervals=[{score:40,interval:1e3},{score:100,interval:800},{score:140,interval:700}],CubeGame.config.obstacleTypes=["Laser","Spikes"],this.game.time.events.loop(1e3,this.updateScore,this)},initEventListeners:function(){this.input.onDown.add(this.player.jump,this.player),this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(this.player.jump,this.player),CubeGame.deadSignal.add(this.die,this)},die:function(){CubeGame.AudioManager.playAudio("Death"),this.game.state.start("GameOver")},updateScore:function(){CubeGame.ScoreManager.increaseScore(10)},updateScoreText:function(){this.scoreText.setText("Score: "+CubeGame.Score)},update:function(){this.player.initObstacleCollisions(this.obstacles),this.updateScoreText()}},CubeGame.Credits=function(){},CubeGame.Credits.prototype={create:function(){this.credits="Avoid the obstacles with the Cube!\nA Javascript/HTML5 Game\nCreated with the Phaser Game Engine\n\nImages created in Inkscape\nSounds created in Audacity",
this.creditsText=CubeGame.factory.addText(100,50,this.credits,30,"#5f5f5f"),this.menuButton=this.game.add.button(100,400,"Textures",this.menuState,this),this.menuButton.frameName="MenuButton",this.creditsThingsGroup=this.game.add.group(),this.creditsThingsGroup.add(this.menuButton),this.creditsThingsGroup.add(this.creditsText),this.creditsThingsSlideIn=this.game.add.tween(this.creditsThingsGroup).from({x:1500},500,Phaser.Easing.Sinusoidal.Out).start()},menuState:function(){this.game.state.start("Menu")}},CubeGame.GameOver=function(){},CubeGame.GameOver.prototype={evaluateHiscore:function(){var a=0,b=CubeGame.DataManager.getHiscore(),c=CubeGame.Score;return a=c>b?c:b,console.log(a),a},preload:function(){},create:function(){this.initGameOverMenu(),this.initGameOverTweens()},initGameOverMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.gameOverGroup=this.game.add.group(),this.buttonsGroup=this.game.add.group();var a=this.evaluateHiscore(),b=!1;a!==CubeGame.DataManager.getHiscore()&&(CubeGame.DataManager.setHiscore(a),b=!0),this.scoreIsText=CubeGame.factory.addText(150,50,"The score is...",30,"#5f5f5f");var c=CubeGame.Score.toString()+" pts",d="Hiscore: "+CubeGame.DataManager.getHiscore()+" pts";b&&(this.newHiscoreText=CubeGame.factory.addText(500,270,"New Hiscore!!!",30,"#3498db"),this.newHiscoreText.anchor.setTo(.5,.5),this.newHiscoreText.angle=-10,this.newHiscoreTextTween=this.game.add.tween(this.newHiscoreText.scale).to({x:1.2,y:1.2},500).to({x:1,y:1},500).loop(!0).start()),this.scoreText=CubeGame.factory.addText(150,120,c,120,"#3498db"),this.hiscoreText=CubeGame.factory.addText(150,300,d,30,"#5f5f5f"),b&&this.gameOverGroup.add(this.newHiscoreText),this.gameOverGroup.add(this.scoreIsText),this.gameOverGroup.add(this.scoreText),this.gameOverGroup.add(this.hiscoreText)},initGameOverTweens:function(){this.gameOverSlideIn=this.game.add.tween(this.gameOverGroup).from({x:-300},200,Phaser.Easing.Sinusoidal.Out).start(),this.replayButton=this.game.add.button(300,400,"Textures",this.startPlay,this),this.replayButton.frameName="PlayButton",this.menuButton=this.game.add.button(500,400,"Textures",this.gotoMenu,this),this.menuButton.frameName="MenuButton",this.buttonsGroup.add(this.replayButton),this.buttonsGroup.add(this.menuButton),this.buttonsSlideIn=this.game.add.tween(this.buttonsGroup).from({x:this.game.width+200},500,Phaser.Easing.Sinusoidal.Out).start()},startPlay:function(){this.game.state.start("Play")},gotoMenu:function(){this.game.state.start("Menu")},update:function(){}},CubeGame.deadSignal=new Phaser.Signal,CubeGame.ScoreManager=function(){},CubeGame.ScoreManager.increaseScore=function(a){CubeGame.Score+=a},CubeGame.ScoreManager.resetScore=function(){CubeGame.Score=0},CubeGame.AudioManager=function(){},CubeGame.AudioManager.loadAudio=function(a){this.sfx=a},CubeGame.AudioManager.playAudio=function(a){this.sfx.play(a)},CubeGame.factory=function(){},CubeGame.factory.addText=function(a,b,c,d,e){return CubeGame.config.Game.add.text(a,b,c,{font:d+"px "+CubeGame.config.FONT,fill:e})},window.fakeStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]}},CubeGame.DataManager=function(){},CubeGame.DataManager.initialise=function(){console.log("Local storage supported? "+this.localStorageSupported()),this.storage=this.localStorageSupported()?window.localStorage:window.fakeStorage},CubeGame.DataManager.localStorageSupported=function(){try{return localStorage.setItem("hi","hi"),localStorage.removeItem("hi"),!0}catch(a){return!1}},CubeGame.DataManager.setHiscore=function(a){this.storage.setItem("CubeGameHiscore",a.toString())},CubeGame.DataManager.getHiscore=function(){return parseFloat(this.storage.getItem("CubeGameHiscore"))},CubeGame.Menu=function(){},CubeGame.Menu.prototype={preload:function(){},create:function(){this.initMenu(),this.initMenuTweens(),this.initParticleEmitter()},initMenu:function(){this.game.stage.backgroundColor="#eeeeee",this.logo=this.game.add.sprite(250,100,"Textures","Logo"),this.playButton=this.game.add.button(400,350,"Textures",this.startPlay,this),this.playButton.frameName="PlayButton",this.creditsButton=this.game.add.button(100,500,"Textures",this.creditsState,this),this.creditsButton.frameName="CreditsButton",this.helpText=CubeGame.factory.addText(250,70,"Click with mouse or spacebar to jump",25,"#5f5f5f"),this.versionText=CubeGame.factory.addText(900,500,"v1.1.0",30,"#5f5f5f")},initMenuTweens:function(){this.logoBounceIn=this.game.add.tween(this.logo).from({y:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.logoUpDown=this.game.add.tween(this.logo).to({y:120},500,Phaser.Easing.Linear.None).to({y:100},500,Phaser.Easing.Linear.None).loop(!0),this.logoBounceIn.chain(this.logoUpDown),this.helpTextSlideIn=this.game.add.tween(this.helpText).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.playButtonSlideIn=this.game.add.tween(this.playButton).from({x:-300},500,Phaser.Easing.Sinusoidal.Out).start(),this.creditsButtonSlideIn=this.game.add.tween(this.creditsButton).from({x:1500},1e3,Phaser.Easing.Sinusoidal.Out).start(),this.versionTextButtonSlideIn=this.game.add.tween(this.versionText.scale).from({x:0,y:0},300,Phaser.Easing.Sinusoidal.Out).start()},initParticleEmitter:function(){this.particleEmitter=this.game.add.emitter(this.game.width/2,0,400),this.particleEmitter.width=this.game.width,this.particleEmitter.makeParticles([CubeGame.config.AtlasSettings.NAME],["Player"]),this.particleEmitter.minParticleScale=.1,this.particleEmitter.maxParticleScale=.3,this.particleEmitter.setYSpeed(100,200),this.particleEmitter.setXSpeed(0,0),this.particleEmitter.setAll("body.allowGravity",!1),this.particleEmitter.minRotation=0,this.particleEmitter.maxRotation=0,this.particleEmitter.start(!1,5e3,300,0)},startPlay:function(){this.game.state.start("Play")},creditsState:function(){this.game.state.start("Credits")},update:function(){}},CubeGame.Obstacles=function(a){Phaser.Group.call(this,a),this.spawner=this.game.time.events.loop(1400,this.spawn,this)},CubeGame.Obstacles.prototype=Object.create(Phaser.Group.prototype),CubeGame.Obstacles.prototype.constructor=CubeGame.Obstacles,CubeGame.Obstacles.prototype.fetchObstacle=function(a,b,c,d){var e=this.getFirstExists(!1);e||(e=new CubeGame.Obstacle(a,0,0),this.add(e)),e.reuse(a,b,c,d)},CubeGame.Obstacles.prototype.update=function(){var a;for(i=0;i<CubeGame.config.spawnIntervals.length;i++)a=CubeGame.config.spawnIntervals[i],CubeGame.Score===a.score&&(this.spawner.delay=a.interval)},CubeGame.Obstacles.prototype.spawn=function(){var a=this.game.rnd.integerInRange(0,1),b=this.game.rnd.integerInRange(50,this.game.height-50);this.fetchObstacle(this.game,this.game.width,b,CubeGame.config.obstacleTypes[a])},CubeGame.Obstacle=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"Textures","Laser")},CubeGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Obstacle.prototype.constructor=CubeGame.Obstacle,CubeGame.Obstacle.prototype.update=function(){this.checkWorldBounds()},CubeGame.Obstacle.prototype.checkWorldBounds=function(){!this.inWorld&&this.exists&&this.kill()},CubeGame.Obstacle.prototype.reuse=function(a,b,c,d){this.reset(b,c),this.hasScored=!1,this.frameName=d,this.anchor.setTo(0,1),a.physics.arcade.enable(this),this.body.allowGravity=!1,this.hasScored=!1,this.body.velocity.x=CubeGame.config.SCROLL_VELOCITY},CubeGame.Obstacle.prototype.stop=function(){this.body.velocity.x=0},CubeGame.Player=function(a){Phaser.Sprite.call(this,a,250,0,"Textures","Player"),a.physics.arcade.enable(this),this.y=this.game.height/3},CubeGame.Player.prototype=Object.create(Phaser.Sprite.prototype),CubeGame.Player.prototype.constructor=CubeGame.Player,CubeGame.Player.prototype.jump=function(){this.body.velocity.y=CubeGame.config.JUMP_VELOCITY},CubeGame.Player.prototype.initObstacleCollisions=function(a){this.game.physics.arcade.collide(this,a,function(){CubeGame.deadSignal.dispatch()})},CubeGame.Player.prototype.update=function(){this.y<0&&CubeGame.deadSignal.dispatch(),this.y>this.game.height-60&&CubeGame.deadSignal.dispatch()},CubeGame.Boot=function(){},CubeGame.Boot.prototype={startSetup:function(){this.game.state.start("Setup")},preload:function(){this.game.stage.backgroundColor="#eeeeee",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,CubeGame.config.Game=this.game,CubeGame.config.Font="Lato",CubeGame.DataManager.initialise(),isNaN(CubeGame.DataManager.getHiscore())&&CubeGame.DataManager.setHiscore(0),this.startSetup()}},CubeGame.Setup=function(){},CubeGame.Setup.prototype={preload:function(){this.loaded=this.game.add.text(400,250,"Loading",{font:"50px "+CubeGame.config.Font,fill:"#5f5f5f"});var a=CubeGame.config.AtlasSettings;this.game.load.atlasJSONHash(a.NAME,a.IMG,a.JSON),this.game.load.audiosprite("Audiosprite","Audio/Audiosprite.ogg","Audio/Audiosprite.json")},create:function(){var a=this.game.add.audioSprite("Audiosprite");CubeGame.AudioManager.loadAudio(a),this.loaded.setText("Loaded!");var b=this;this.game.time.events.add(2e3,function(){b.game.state.start("Menu")})}};
